!function(){"use strict";function t(t){function l(t){P=!0,b=(t.pageX-Y)*T,E=(t.pageY-I)*T}function _(t){var r,l;if(P){switch(r=(t.pageX-Y)*T,l=(t.pageY-I)*T,S){case e:m(b,E,r,l);break;case a:y(r,l)}b=r,E=l}}function o(){P&&(P=!1)}function d(t){1===t.touches.length&&(b=(t.touches[0].pageX-Y)*T,E=(t.touches[0].pageY-I)*T)}function s(t){var r,l;if(r=(t.touches[0].pageX-Y)*T,l=(t.touches[0].pageY-I)*T,r!==b||l!==E){switch(S){case e:m(b,E,r,l);break;case a:y(r,l)}b=r,E=l}}function c(){C=C+1<r.length?C+1:0,R.style.width=3*r[C]+"px",R.style.height=3*r[C]+"px",u(),k()}function i(){W.classList.remove("thr0w_draw_palatte__tool--pen"),W.classList.remove("thr0w_draw_palatte__tool--eraser"),S===e?(S=a,W.classList.add("thr0w_draw_palatte__tool--eraser")):(S=e,W.classList.add("thr0w_draw_palatte__tool--pen")),k()}function n(){q=!q,w(),k(),q?(j.classList.remove("thr0w_draw_palatte--closed"),B.classList.remove("thr0w_draw_palatte__thumb--closed"),B.classList.add("thr0w_draw_palatte__thumb--open")):(f(),j.classList.add("thr0w_draw_palatte--closed"),B.classList.remove("thr0w_draw_palatte__thumb--open"),B.classList.add("thr0w_draw_palatte__thumb--closed"))}function w(){q?A.classList.remove("thr0w_draw_canvas--closed"):(v(),A.classList.add("thr0w_draw_canvas--closed"))}function h(){for(x=this.style.backgroundColor,H=0;H<D.length;H++)D[H].classList.remove("thr0w_draw_palatte__color_picker--selected");this.classList.add("thr0w_draw_palatte__color_picker--selected"),p(),k()}function p(){F.strokeStyle=x,F.fillStyle=x}function u(){F.lineWidth=r[C]}function v(){x=j.querySelector(".thr0w_draw_palatte__color_picker--default").style.backgroundColor,C=0,S=e,p(),u(),A.width=A.width}function f(){for(H=0;H<D.length;H++)D[H].classList.remove("thr0w_draw_palatte__color_picker--selected");j.querySelector(".thr0w_draw_palatte__color_picker--default").classList.add("thr0w_draw_palatte__color_picker--selected"),window.console.log(C),R.style.width=3*r[C]+"px",R.style.height=3*r[C]+"px",W.classList.remove("thr0w_draw_palatte__tool--pen"),W.classList.remove("thr0w_draw_palatte__tool--eraser"),W.classList.add("thr0w_draw_palatte__tool--pen")}function g(){return{open:q,color:x,linewidthIndex:C,tool:S}}function L(t){t.open!==q&&(q=!q,w()),x=t.color,C=t.linewidthIndex,S=t.tool,p(),u()}function k(){G.update(),G.idle()}function m(t,e,a,l){function _(){F.beginPath(),F.arc(t,e,r[C]/2,0,2*Math.PI),F.closePath(),F.fill(),F.beginPath(),F.moveTo(t,e),F.lineTo(a,l),F.stroke(),F.closePath()}window.requestAnimationFrame(_)}function y(t,e){F.clearRect(t-r[C]/2,e-r[C]/2,r[C],r[C])}if(!t||"object"!=typeof t)throw 400;var b,E,S=e,q=!1,x=null,C=null,P=!1,T=t.getRowScale(),z=t.getFrame(),X=t.getContent(),Y=z.offsetLeft+X.offsetLeft,I=z.offsetTop+X.offsetTop,j=document.createElement("div"),A=document.createElement("canvas"),F=A.getContext("2d");j.classList.add("thr0w_draw_palatte"),j.classList.add("thr0w_draw_palatte--closed"),j.innerHTML=['<div class="thr0w_draw_palatte__color_picker--default thr0w_draw_palatte__color_picker" style="background: black;"></div>','<div class="thr0w_draw_palatte__color_picker" style="background: white;"></div>','<div class="thr0w_draw_palatte__color_picker" style="background: red;"></div>','<div class="thr0w_draw_palatte__color_picker" style="background: orange;"></div>','<div class="thr0w_draw_palatte__color_picker" style="background: yellow;"></div>','<div class="thr0w_draw_palatte__color_picker" style="background: green;"></div>','<div class="thr0w_draw_palatte__color_picker" style="background: blue;"></div>','<div class="thr0w_draw_palatte__color_picker" style="background: purple;"></div>','<div class="thr0w_draw_palatte__size">','<div class="thr0w_draw_palatte__size__dot">',"</div>","</div>",'<div class="thr0w_draw_palatte__tool"></div>','<div class="thr0w_draw_palatte__thumb thr0w_draw_palatte__thumb--closed"></div>'].join("\n"),X.appendChild(j);var H,M=j.querySelector(".thr0w_draw_palatte__size"),R=j.querySelector(".thr0w_draw_palatte__size__dot"),W=j.querySelector(".thr0w_draw_palatte__tool"),B=j.querySelector(".thr0w_draw_palatte__thumb"),D=j.querySelectorAll(".thr0w_draw_palatte__color_picker");for(A.classList.add("thr0w_draw_canvas"),A.classList.add("thr0w_draw_canvas--closed"),A.width=t.getWidth(),A.height=t.getHeight(),A.addEventListener("mousedown",l),A.addEventListener("mousemove",_),A.addEventListener("mouseup",o),A.addEventListener("mouseleave",o),A.addEventListener("touchstart",d),A.addEventListener("touchmove",s),X.appendChild(A),M.addEventListener("click",c),W.addEventListener("click",i),B.addEventListener("click",n),H=0;H<D.length;H++)D[H].addEventListener("click",h);v(),f();var G=new window.thr0w.Sync(t,"thr0w_draw_"+X.id,g,L)}if(void 0===window.thr0w)throw 400;var e=0,a=1,r=[1,3,5,10],l={};l.load=t,window.thr0w.draw=l}();